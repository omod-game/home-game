<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä¸–ç´€è¼ªå»»ãƒ¡ãƒ¢ãƒªã‚¢ï¼ˆä»®ï¼‰å®Œå…¨ç‰ˆ</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-b from-purple-100 via-pink-100 to-yellow-100 min-h-screen flex flex-col items-center">

<header class="w-full bg-white shadow-md py-6 mb-6 rounded-b-3xl text-center">
  <h1 class="text-4xl font-extrabold text-purple-700">ğŸ•° ä¸–ç´€è¼ªå»»ãƒ¡ãƒ¢ãƒªã‚¢ï¼ˆä»®ï¼‰å®Œå…¨ç‰ˆ ğŸ•°</h1>
  <p class="text-gray-600 mt-2 text-lg">è»¢å…¥ç”Ÿã®ã‚ãªãŸãŒä½“é¨“ã™ã‚‹å‰ä¸–ã¨ä»Šä¸–ã®ç‰©èª</p>
</header>

<main class="flex-1 w-full max-w-3xl px-4">
  <div id="gameArea" class="bg-white rounded-3xl shadow-lg p-6 flex flex-col items-center">
    <div id="background" class="w-full h-64 bg-gray-200 mb-4 flex items-center justify-center">
      <span class="text-gray-500">èƒŒæ™¯ç”»åƒã¯ã“ã“ã«è¡¨ç¤º</span>
    </div>

    <div id="character" class="w-48 h-48 bg-gray-300 mb-4 flex items-center justify-center">
      <span class="text-gray-500">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒã¯ã“ã“ã«è¡¨ç¤º</span>
    </div>

    <div id="text" class="text-gray-800 text-lg mb-6 text-center">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ç‰©èªã‚’é€²ã‚ã‚ˆã†ï¼</div>

    <div id="choices" class="flex flex-col gap-4 w-full items-center"></div>

    <button id="nextBtn" class="mt-4 bg-purple-500 hover:bg-purple-600 text-white font-bold px-6 py-3 rounded-2xl">ã‚²ãƒ¼ãƒ é–‹å§‹ â–¶</button>
  </div>
</main>

<footer class="w-full py-4 mt-8 bg-white text-center shadow-inner">
  <p class="text-gray-500 text-sm">&copy; 2025 MiniGame Portal</p>
</footer>

<script>
// ã‚²ãƒ¼ãƒ çŠ¶æ…‹
const GameState = {
  chapter: 1,
  affection: { Miku: 0, Shizuka: 0, Rena: 0 },
  flags: {},
  BellShard: 0,
  currentScene: 0,
  route: null,
  inRoute: false
};

// å°æœ¬ï¼ˆå…±é€šãƒ«ãƒ¼ãƒˆâ†’å€‹åˆ¥ãƒ«ãƒ¼ãƒˆâ†’éš ã—ãƒ«ãƒ¼ãƒˆï¼‰
const scenes = {
  common: [
    {text:"ç¬¬1ç« ï¼šè»¢å…¥ã¨ä¸‰ã¤ã®æ‰‰ã€‚å¸­æ›¿ãˆã§éš£ã«ãªã£ãŸã®ã¯ï¼Ÿ",
     choices:[
       {label:"æ¡œäº• æœªæ¥", next:"common2", affect:{Miku:1}, flag:"F_Miku_Help"},
       {label:"é»’å· é™", next:"common2", affect:{Shizuka:1}, flag:"F_Library_Key"},
       {label:"ç™½çŸ³ ç²å¥ˆ", next:"common2", affect:{Rena:1}, flag:"F_Council_Pass"}
     ]
    },
    {key:"common2", text:"æ”¾èª²å¾Œã€ã©ã®æ´»å‹•ã«å‚åŠ ã™ã‚‹ï¼Ÿ",
     choices:[
       {label:"æœªæ¥ã®éƒ¨èªŒæ‰‹ä¼ã„", next:"common3", affect:{Miku:2}, flag:"F_Miku_Help"},
       {label:"å›³æ›¸å®¤ã§é™ã®æ•´ç†ã‚’æ‰‹ä¼ã†", next:"common3", affect:{Shizuka:2}, flag:"F_Library_Key"},
       {label:"ç”Ÿå¾’ä¼šã®è³‡æ–™é‹ã³ã«å”åŠ›", next:"common3", affect:{Rena:2}, flag:"F_Council_Pass"}
     ]
    },
    {key:"common3", text:"å¤œã€å¤¢ã®ä¸­ã§é›¶æ™‚ã®é˜ã®æ–­ç‰‡ã‚’è¦‹ãŸã€‚BellShard+1",
     choices:[{label:"æ¬¡ã¸", next:"common4"}],
     BellShard:1
    },
    {key:"common4", text:"ç¬¬2ç« ï¼šéƒ½å¸‚ä¼æ‰¿ã¨æ˜Ÿç¥­ã€‚å‰å¤œç¥­ã«èª°ã¨å›ã‚‹ï¼Ÿ",
     choices:[
       {label:"æœªæ¥ã¨å›ã‚‹", next:"common5", affect:{Miku:2}},
       {label:"é™ã¨å›ã‚‹", next:"common5", affect:{Shizuka:2}},
       {label:"ç²å¥ˆã¨å›ã‚‹", next:"common5", affect:{Rena:2}}
     ]
    },
    {key:"common5", text:"æ ¡èˆè£ã§ç„¡éŸ³ã®é˜ã®å¹»è´ã€‚BellShard+1",
     choices:[{label:"æ¬¡ã¸", next:null}],
     BellShard:1
    }
  ],

  Miku: [
    {text:"ç¬¬1ç« ï¼šé›¨å®¿ã‚Šã®å±‹ä¸Šã€‚æœªæ¥ã®å£ç™–ã€Œãã£ã¨å¤§ä¸ˆå¤«ã€ãŒèã“ãˆã‚‹", choices:[{label:"æ¬¡ã¸", next:"Miku2"}], flag:"F_Rooftop_Promise"},
    {key:"Miku2", text:"å†™çœŸéƒ¨ã®æš—å®¤ã€‚ç¾åƒã•ã‚ŒãŸå†™çœŸã«äºŒé‡å†™ã‚ŠãŒâ€¦", choices:[
      {label:"çœŸå®Ÿã‚’æ˜ã‚‹", next:"Miku3", flag:"F_Photo_Truth"},
      {label:"ä»Šã‚’å®ˆã‚‹", next:"Miku3", flag:"F_Photo_Love"}
    ], BellShard:1},
    {key:"Miku3", text:"æ˜Ÿç¥­ã®å‘Šç™½ã€‚é˜ãŒé³´ã‚‹å¯¸å‰ã€å¤¢ã®æ–­ç‰‡ã‚’å£ã«ã™ã‚‹ã¨æœªæ¥ã®ç³ãŒæºã‚Œã‚‹", choices:[
      {label:"Good: ä»Šã‚’é¸ã¶", next:null},
      {label:"Bitter: çœŸå®Ÿã‚’è¿½ã†", next:null},
      {label:"Bad: å„€ç¤¼é˜»å®³", next:null}
    ]}
  ],

  Shizuka: [
    {text:"ç¦æ›¸ã€Œä¸–ç´€ç´‹ç« ã€ã‚’ç™ºè¦‹ã€‚å›³æ›¸å®¤éš ã—æ›¸æ¶ã¸", choices:[{label:"æ¬¡ã¸", next:"Shizuka2"}], flag:"F_Forbidden_Tome"},
    {key:"Shizuka2", text:"åœ°ä¸‹è³‡æ–™åº«ã€‚å£ç”»ã«é˜ã®è¨­è¨ˆã€‚BellShard+1", choices:[
      {label:"é™ã®ç‹¬æ–­ã‚’æ­¢ã‚ã‚‹", next:"Shizuka3", flag:"F_Stop_Action"},
      {label:"ä»»ã›ã‚‹", next:"Shizuka3", flag:"F_Allow_Action"}
    ], BellShard:1},
    {key:"Shizuka3", text:"é™ãŒå‰ä¸–ã®åã‚’å£ã«ã—ã‹ã‘ã‚‹", choices:[
      {label:"Good: ç¦æ›¸ã‚’é–‰ã˜ã‚‹", next:null},
      {label:"Bitter: çœŸå®Ÿé–‹ç¤º", next:null},
      {label:"Bad: ç¦æ›¸é–‹æ”¾â†’å·»ãæˆ»ã—", next:null}
    ]}
  ],

  Rena: [
    {text:"å„€ç¤¼ã®æ®µå–ã‚Šã€‚æ—§æ™‚è¨ˆå¡”ã¸ã®åŒè¡Œ", choices:[{label:"æ¬¡ã¸", next:"Rena2"}], flag:"F_Shrine_Access"},
    {key:"Rena2", text:"ä»£å„Ÿã€‚é˜ã‚’é³´ã‚‰ã™å„€ç¤¼ã«å€‹äººçš„è¨˜æ†¶ã®ä¾›å‡ºãŒå¿…è¦ã€‚BellShard+1", choices:[
      {label:"æŠœã‘é“ã‚’æ¢ã™", next:"Rena3", flag:"F_Shrine_Shortcut"},
      {label:"æ­£æ”»æ³•ã§æ”¯ãˆã‚‹", next:"Rena3", flag:"F_Shrine_Normal"}
    ], BellShard:1},
    {key:"Rena3", text:"0:00ã®é¸æŠ", choices:[
      {label:"Good: è¨˜æ†¶ã‚’å¥ªã‚ãšéƒ½å¸‚ã‚’å®ˆã‚‹", next:null},
      {label:"Bitter: è¨˜æ†¶å°‘ã—æ¶ˆãˆã‚‹", next:null},
      {label:"Bad: å„€ç¤¼å¤±æ•—â†’å·»ãæˆ»ã—", next:null}
    ]}
  ],

  TrueRoute: [
    {text:"éš ã—ç« ï¼šè¨˜æ†¶ã®å¤§è–å ‚ã€‚å¤¢ã®äººç‰©ãŒå®Ÿä½“åŒ–ã€‚", choices:[{label:"æ¬¡ã¸", next:"True2"}]},
    {key:"True2", text:"é˜ã¯å¿˜å´ã§ã¯ãªãé¸æŠã®è£…ç½®ã ã¨å‘Šã’ã‚‹", choices:[
      {label:"æ—¥å¸¸ã‚’å®ˆã‚Šè¼ªå»»ã‚’å—ã‘å…¥ã‚Œã‚‹ï¼ˆãƒˆã‚¥ãƒ«ãƒ¼Bï¼‰", next:null},
      {label:"å…¨å“¡ã®é¸æŠã‚’éµã«è¼ªå»»åœæ­¢ï¼ˆãƒˆã‚¥ãƒ«ãƒ¼Aï¼‰", next:null}
    ]}
  ]
};

// ã‚·ãƒ¼ãƒ³è¡¨ç¤º
function showScene(routeName=null){
  let scene;
  if(GameState.inRoute){
    scene = scenes[GameState.route][GameState.currentScene];
  } else {
    scene = scenes.common[GameState.currentScene];
  }

  document.getElementById("text").inner
